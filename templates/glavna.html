<!DOCTYPE html>
<html lang="ru">  <!-- Изменил язык на русский -->
<head>
    <title>Каталог игр</title> <!-- Добавил заголовок -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <!-- Подключение CSS файла -->
    <link rel="stylesheet" href="{{ css_file }}">
</head>
<body>
    <!-- Flash сообщения -->
    <div class="flash-container">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="flash-message flash-{{ category }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </div>

    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
        <div class="container-fluid" style="height: 75px;  display: flex;
  flex-direction: row;
  align-items: flex-start;">
          
          <div style="display: flex; align-items: center; justify-content: space-between; height: 100%;">     
              <img src="{{ url_for('static', filename='Screenshot_6.png') }}"  alt="Логотип" height="90px" >            
              <button class="so" id="openModalBtn">Регистрация</button>

              <div id="soo" class="modal">
                  <div class="modal-content">
                      <span class="close">&times;</span>
                      <form method="POST">
                          <label for="login">Login:</label><br>
                          <input type="text" id="login" name="login" required><br>
              
                          <label for="password">Password:</label><br>
                          <input type="password" id="password" name="password" required><br>
              
                          <label for="pochta">Email:</label><br>
                          <input type="email" id="pochta" name="pochta" required><br>
              
                          <button class="submit-btn" type="submit">Отправить</button>
                      </form>
                  </div>
              </div>        
              <a href="#" class="so">Кнопка 2</a>
              <a href="#" class="so">Кнопка 3</a>
            </div>
            <form class="d-flex ml-auto" role="search">
              <input class="form-control_me-2" type="search" placeholder="Поиск" aria-label="Поиск">
              <button class="btn_btn-outline-success" type="submit">Поиск</button>
            </form>
            <span class="Button-label"><img src="https://avatars.githubusercontent.com/u/185120112?v=4" alt="" size="32" height="50" width="50" data-view-component="true" class="avatar circle" ></span>
      </nav>
    
   <div id="жанры">
   
       <form action="/" method="GET">  
            <input type="checkbox" class="custom-checkbox" id="happy1" name="genre" value="RPG">
            <label for="happy1">RPG</label>

            <input type="checkbox" class="custom-checkbox" id="happy2" name="genre" value="Шутеры">
            <label for="happy2">Шутеры</label>

            <input type="checkbox" class="custom-checkbox" id="happy3" name="genre" value="Гонки">
            <label for="happy3">Гонки</label>

            <input type="checkbox" class="custom-checkbox" id="happy4" name="genre" value="Экшен">
            <label for="happy4">Экшен</label>

            <input type="checkbox" class="custom-checkbox" id="happy5" name="genre" value="Стратегии">
            <label for="happy5">Стратегии</label>

            <input type="checkbox" class="custom-checkbox" id="happy6" name="genre" value="Файтинг">
            <label for="happy6">Файтинг </label>

            <input type="checkbox" class="custom-checkbox" id="happy7" name="genre" value="Хоррор">
            <label for="happy7">Хоррор</label>

            <input type="checkbox" class="custom-checkbox" id="happy8" name="genre" value="Симулятор">
            <label for="happy8">Симулятор</label>

            <input type="checkbox" class="custom-checkbox" id="happy9" name="genre" value="Аркады">
            <label for="happy9">Аркады</label>

            <input type="checkbox" class="custom-checkbox" id="happy10" name="genre" value="Стелс">
            <label for="happy10">Стелс </label>

            <input type="checkbox" class="custom-checkbox" id="happy11" name="genre" value="товер дефенс">
            <label for="happy11">товер дефенс</label>

                <!-- ... Ваши чекбоксы для жанров ... -->
                <button type="submit" class="btn btn-primary mt-3">Применить фильтры</button>
        
       </form>
    </div>

    <div class="game-indi">
     
        <div class="kart-container">  <!--  Добавил контейнер для карточек -->
            {% for item in glavna %}
                <div class="kart">  <!--  Используем div для карточки -->
                    {% if item.image %}
                        <img src="{{ item.image }}" alt="{{ item.name }}" class="foto">
                    {% else %}
                        <img src="{{ url_for('static', filename='placeholder.png') }}" alt="Placeholder" class="foto">
                        <!--  Добавьте placeholder.png в static -->
                    {% endif %}
                    <a class='so' href="http://127.0.0.1:5000/karta1/{{ item.id }}"> побробнее </a>
                    <div class="opis">
                        <h2>{{ item.name }}</h2>
                        <p>{{ item.opis }}</p>
                        <div class="tegi_indi">
                        
                           Теги: {{ item.teg1 }}{% if item.teg2 %}, {{ item.teg2 }}{% endif %}{% if item.teg3 %}, {{ item.teg3 }}{% endif %}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
<script src="{{ url_for('static', filename='главная.js') }}"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Обработка модального окна
    var modal = document.getElementById('soo');
    var btn = document.getElementById('openModalBtn');
    var span = document.getElementsByClassName('close')[0];
    
    if (btn) {
        btn.onclick = function() {
            modal.style.display = 'block';
        }
    }
    
    if (span) {
        span.onclick = function() {
            modal.style.display = 'none';
        }
    }
    
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = 'none';
        }
    }
    
    // Отладка отправки формы
    var form = document.querySelector('#soo form');
    if (form) {
        form.addEventListener('submit', function(e) {
            // Не предотвращаем отправку формы, просто логируем данные
            console.log('Отправка формы регистрации');
            console.log('Login:', form.login.value);
            console.log('Password length:', form.password.value.length);
            console.log('Email:', form.pochta.value);
        });
    }
    
    // Автоматически скрываем flash-сообщения через 5 секунд
    var flashMessages = document.querySelectorAll('.flash-message');
    flashMessages.forEach(function(message) {
        setTimeout(function() {
            message.style.opacity = '0';
            setTimeout(function() {
                message.style.display = 'none';
            }, 1000); // Ждем завершения анимации
        }, 5000);
    });
});
</script>
  

</body>
</html>